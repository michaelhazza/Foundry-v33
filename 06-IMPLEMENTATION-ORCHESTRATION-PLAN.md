# Foundry - Implementation Orchestration Plan
**Generated by:** Agent 6 (Implementation Orchestrator v50)  
**Date:** 2026-01-28  
**Status:** Ready for Execution

---

## EXECUTIVE SUMMARY

This document provides the complete implementation orchestration plan for **Foundry**, a multi-tenant data preparation platform that transforms raw business data into AI-ready datasets.

**Project Scope:**
- **51 API Endpoints** across 7 service areas
- **18 Pages** across 4 functional areas
- **9 Database Tables** with multi-tenant isolation
- **Full-Stack Monolithic Architecture** deployed on Replit

**Technology Stack:**
- **Backend:** Node.js 20, Express.js 4, PostgreSQL (Neon), Drizzle ORM
- **Frontend:** React 18, Vite 5, TanStack Query v5, shadcn/ui, Tailwind CSS
- **Auth:** JWT with HTTP-only cookies, bcrypt password hashing
- **File Processing:** multer, papaparse (CSV), xlsx (Excel)

**Build Configuration:**
- **CONCURRENT_EXECUTION:** true (3-thread parallel execution)
- **AUTO_FIX_MODE:** false (prevention-first approach)
- **Quality Target:** 0 issues at deployment
- **Estimated Build Time:** 12-15 minutes (with concurrency)

---

## PROJECT OVERVIEW

### Product Description

Foundry enables organizations to:
1. **Upload** raw data files (CSV, Excel, JSON) or connect to APIs (Teamwork Desk)
2. **Process** data with automatic PII detection and de-identification
3. **Export** clean, structured datasets in AI-ready formats (JSONL, Q&A pairs, JSON)

**Core Value:** Transform heterogeneous business data into consistent, privacy-safe datasets for AI systems—without custom engineering.

### Business Context

- **Problem:** Data preparation takes 2-4 weeks per project; 60% of AI initiatives stall on data readiness
- **Solution:** Self-service platform reduces time-to-first-output to under 5 minutes
- **Users:** AI Product Managers, ML Engineers, Operations Managers
- **Scale:** MVP targets 50 concurrent users, 100 organizations, 1,000 projects

---

## ARCHITECTURE OVERVIEW

### Deployment Architecture

```
┌───────────────────────────────────────────────────────────┐
│                    REPLIT CONTAINER                       │
│                                                           │
│  ┌─────────────────┐                                     │
│  │   Vite Dev      │  Port 5000 (dev)                    │
│  │   (React UI)    │  → Proxies to Express :3001         │
│  └─────────────────┘                                     │
│           ↓                                               │
│  ┌─────────────────────────────────────────────────┐    │
│  │            Express Server                       │    │
│  │  - API Endpoints (51 total)                     │    │
│  │  - JWT Auth Middleware                          │    │
│  │  - File Upload Processing                       │    │
│  │  - Background Processing Jobs                   │    │
│  └─────────────────────────────────────────────────┘    │
│           ↓                                               │
│  ┌─────────────────────────────────────────────────┐    │
│  │         Drizzle ORM + PostgreSQL                │    │
│  │  - 9 Tables (multi-tenant)                      │    │
│  │  - Transactions for critical operations         │    │
│  └─────────────────────────────────────────────────┘    │
│                                                           │
└───────────────────────────────────────────────────────────┘
                         ↓
            ┌─────────────────────────┐
            │   PostgreSQL (Neon)     │
            │   - Managed Database    │
            │   - Connection pooling  │
            └─────────────────────────────┘
```

### Layered Architecture

**Layer 1: Presentation (Frontend)**
- React components with shadcn/ui
- TanStack Query for server state
- React Router for navigation
- React Hook Form + Zod validation

**Layer 2: API (Backend Routes)**
- Express routers (6 route files)
- JWT authentication middleware
- Request validation middleware
- Error handling middleware

**Layer 3: Business Logic (Services)**
- 7 service files (one per domain)
- Business rule enforcement
- Multi-step operation orchestration
- Async processing coordination

**Layer 4: Data Access (ORM)**
- Drizzle ORM schema definitions
- Type-safe database queries
- Transaction management
- Connection pooling

---

## IMPLEMENTATION PHASES

### Phase Execution Strategy

**Concurrent Execution Model (3 Threads):**

```
Phase 0.0: Spec Stack Validation (Gate #53) ──────────────────────┐
                                                                   │
Phase 0.5: Contract Parsing (Pattern 83) ─────────────────────────┤
                                                                   │
Phase 0: Pre-Flight Files ────────────────────────────────────────┤
  - Create .replit, package.json, vite.config.ts                  │
  - Create tsconfig.json, .env.example                            │
  - Verify deployment configuration                               │
                                                                   ▼
Phase 1: Foundation (Sequential) ─────────────────────────────────┐
  - Project scaffolding                                            │
  - Core utilities (response, validation, error helpers)           │
  - Database connection setup                                      │
  - Middleware configuration                                       │
                                                                   ▼
┌──────────────────────── CONCURRENT BLOCK ──────────────────────────┐
│                                                                    │
│  ┌──────────────────┐   ┌──────────────────┐   ┌──────────────┐  │
│  │   THREAD A       │   │   THREAD B       │   │   THREAD C   │  │
│  ├──────────────────┤   ├──────────────────┤   ├──────────────┤  │
│  │ Phase 2:         │   │ Phase 4:         │   │ Phase 5:     │  │
│  │   Services       │   │   Database       │   │   Components │  │
│  │   (7 files)      │   │   Schema         │   │   (shared)   │  │
│  │   ↓              │   │   (9 tables)     │   │   ↓          │  │
│  │ Phase 3:         │   │   + Migrations   │   │ Phase 7:     │  │
│  │   Routes         │   │   + Seed Data    │   │   Pages      │  │
│  │   (6 files)      │   │                  │   │   (18 files) │  │
│  └──────────────────┘   └──────────────────┘   └──────────────┘  │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
                                ▼
                    [SYNCHRONIZATION POINT]
                                ▼
Phase 6: Auth & Middleware (Sequential) ──────────────────────────┐
  - JWT middleware                                                  │
  - Auth context                                                    │
  - Protected routes                                                │
                                                                    ▼
Phase 8: Integration (Sequential) ────────────────────────────────┐
  - Main server setup                                               │
  - Route integration                                               │
  - App.tsx setup                                                   │
  - Final verification                                              │
                                                                    ▼
Agent 7: Verification Scripts (52 gates) ─────────────────────────┐
                                                                   │
[Agent 8 SKIPPED - AUTO_FIX_MODE=false]                           │
                                                                   ▼
                        DEPLOYMENT READY
```

---

## DETAILED PHASE BREAKDOWN

### PHASE 0.0: Spec Stack Validation (Gate #53)

**Purpose:** Validate specification integrity before code generation

**Actions:**
1. Verify all 11 required spec files present
2. Validate JSON contract files exist and are valid
3. Check ASCII-only encoding (no mojibake)
4. Verify proper host references (127.0.0.1, not localhost)
5. Cross-validate contract consistency

**Verification Script:** `verify-spec-stack.sh`

**Exit Criteria:**
- [ ] All required files present
- [ ] All JSON files valid
- [ ] No encoding issues
- [ ] All cross-references consistent

---

### PHASE 0.5: Contract Parsing (Pattern 83 - NEW in v50)

**Purpose:** Parse JSON contracts and build internal implementation maps

**Actions:**
1. **Parse service-contracts.json:**
   - Build serviceMap: endpoint → { serviceFile, functionName, params, returns }
   - Validate: 51 endpoints, 7 service files
   - Extract exact function names (camelCase)
   - Extract exact parameter names and sources

2. **Parse routes-pages-manifest.json:**
   - Build pageMap: routePath → { filePath, apiDependencies, purpose }
   - Validate: 18 pages total
   - Extract component dependencies
   - Extract data requirements

3. **Parse architectural-decisions.json:**
   - Extract decisions: { category, selectedOption, implementationDetails }
   - Extract configuration values (timeouts, limits, policies)
   - Validate mandatory decisions present

4. **Cross-Validation:**
   - Verify every page's apiDependencies exist in serviceMap
   - Verify no orphaned API endpoints
   - Verify no pages created before APIs

**Outputs:**
- `/home/claude/contracts/service-map.json` (parsed endpoint mappings)
- `/home/claude/contracts/page-map.json` (parsed page metadata)
- `/home/claude/contracts/decisions.json` (architectural choices)

**Exit Criteria:**
- [ ] Service map contains 51 endpoints
- [ ] Page map contains 18 pages
- [ ] All page API dependencies validated
- [ ] Zero cross-validation errors

---

### PHASE 0: Pre-Flight File Creation

**Purpose:** Create mandatory deployment configuration files BEFORE scaffolding

**Files to Create:**

1. **`.replit` (Pattern 80):**
```toml
run = "npm run dev"
entrypoint = "server/index.ts"
language = "nodejs-20"

[deployment]
run = ["npm", "run", "start"]
deploymentTarget = "cloudrun"

[nix]
channel = "stable-24_05"

[[ports]]
localPort = 5000
externalPort = 80

[[ports]]
localPort = 3001
externalPort = 3001
```

2. **`package.json`:**
   - All dependencies from architectural decisions
   - Scripts: dev, start, build, migrate
   - Concurrent dev script (Pattern 81): PORT=3001

3. **`vite.config.ts`:**
   - Port 5000 configuration
   - Proxy to http://127.0.0.1:3001
   - NO 'localhost' strings (Pattern 82)
   - strictPort: true

4. **`tsconfig.json`:**
   - Strict TypeScript configuration
   - Path aliases (@/ for src/)

5. **`.env.example`:**
   - DATABASE_URL, JWT_SECRET, PORT, NODE_ENV
   - All required environment variables

**Verification Scripts:**
- `verify-replit-deployment.sh` (Pattern 80)
- `verify-port-consistency.sh`
- `verify-dev-script-concurrent.sh` (Pattern 81)
- `verify-vite-config.sh`

**Exit Criteria:**
- [ ] All 5 files created
- [ ] Port configuration consistent (5000, 3001)
- [ ] No 'localhost' strings
- [ ] All verification scripts pass

---

### PHASE 1: Foundation Setup

**Purpose:** Create project structure, core utilities, and base configuration

**Directory Structure:**
```
foundry/
├── client/               # Frontend (React + Vite)
│   ├── public/
│   ├── src/
│   │   ├── components/  # Reusable components
│   │   │   ├── ui/      # shadcn/ui components
│   │   │   └── layout/  # Layout components
│   │   ├── pages/       # Page components (18 total)
│   │   │   ├── auth/
│   │   │   ├── dashboard/
│   │   │   ├── projects/
│   │   │   ├── sources/
│   │   │   ├── processing/
│   │   │   └── datasets/
│   │   ├── lib/         # Utilities
│   │   ├── hooks/       # Custom React hooks
│   │   ├── types/       # TypeScript types
│   │   └── App.tsx      # Main app component
│   └── index.html
├── server/              # Backend (Express + Node)
│   ├── config/          # Configuration files
│   ├── db/              # Database layer
│   │   ├── schema/      # Drizzle schemas (9 tables)
│   │   └── migrations/  # Migration files
│   ├── middleware/      # Express middleware
│   ├── routes/          # API routes (6 files)
│   ├── services/        # Business logic (7 files)
│   ├── processors/      # Background jobs
│   ├── utils/           # Utilities
│   └── index.ts         # Server entry point
├── shared/              # Shared types
├── docs/                # Generated contracts
└── scripts/             # Utility scripts
```

**Core Utilities to Create:**

1. **`server/utils/response.ts` (Pattern 1):**
```typescript
// Success/error response helpers
export const successResponse = (data, message?) => { ... }
export const errorResponse = (message, code) => { ... }
export const paginatedResponse = (data, page, total) => { ... }
```

2. **`server/utils/validation.ts` (Pattern 2):**
```typescript
// Zod validation middleware
export const validateBody = (schema) => { ... }
export const validateParams = (schema) => { ... }
export const validateQuery = (schema) => { ... }
```

3. **`server/middleware/errorHandler.ts` (Pattern 3):**
```typescript
// Global error handler
export const errorHandler = (err, req, res, next) => { ... }
```

4. **`server/db/index.ts` (Pattern 4):**
```typescript
// Database connection + Drizzle setup
import { drizzle } from 'drizzle-orm/node-postgres';
import { Pool } from 'pg';
// Connection pooling configuration
```

5. **`client/src/components/ErrorBoundary.tsx` (Pattern 23):**
```typescript
// React error boundary
class ErrorBoundary extends React.Component {
  componentDidCatch(error, errorInfo) { ... }
  render() { ... }
}
```

**Verification Scripts (Phase 1):**
- `verify-project-structure.sh`
- `verify-response-helpers.sh`
- `verify-error-handler.sh`
- `verify-error-boundary.sh`
- `verify-env-example.sh` (Pattern 28)
- `verify-network-binding.sh` (Pattern 29)

**Exit Criteria:**
- [ ] Complete directory structure created
- [ ] All 5 core utility files present
- [ ] ErrorBoundary implemented and wrapped around App
- [ ] Database connection configured
- [ ] All Phase 1 verification scripts pass

---

### PHASE 2: Services Implementation (Thread A)

**Purpose:** Implement business logic layer BEFORE routes (service-first architecture)

**Service Files to Create (7 total):**

1. **`server/services/auth.service.ts` (8 endpoints)**
   - Functions: register, login, logout, forgotPassword, resetPassword, getProfile, updateProfile, deleteAccount
   - Pattern: Transaction wrapper for register (creates User + Organization)

2. **`server/services/organizations.service.ts` (4 endpoints)**
   - Functions: getOrganization, updateOrganization, getMembers, getStats

3. **`server/services/projects.service.ts` (6 endpoints)**
   - Functions: createProject, listProjects, getProject, updateProject, deleteProject, getProjectStats
   - Pattern: BaseService pagination for listProjects

4. **`server/services/sources.service.ts` (6 endpoints)**
   - Functions: createSource, listSources, getSource, updateSource, deleteSource, previewSource
   - Pattern: File upload handling with multer

5. **`server/services/processing.service.ts` (6 endpoints)**
   - Functions: createJob, listJobs, getJob, cancelJob, getJobLogs, getJobStats

6. **`server/services/datasets.service.ts` (6 endpoints)**
   - Functions: listDatasets, getDataset, downloadDataset, previewDataset, deleteDataset, getDatasetStats

7. **`server/services/integrations.service.ts` (6 endpoints)**
   - Functions: connectTeamworkDesk, disconnectTeamworkDesk, getIntegrationStatus, syncData, getIntegrations, testConnection

**Implementation Rules (from Agent 6 v50):**

1. **Service Contract Alignment (Pattern 76):**
   - Function names MUST match service-contracts.json exactly (camelCase)
   - Parameter order MUST match contract specification
   - Return types MUST match contract specification
   - Example: "login" not "loginUser", "getUserProfile" not "getUserProfileData"

2. **NO Stub Implementations (Pattern 77):**
   - Every function must have complete logic
   - No `throw new Error('Not implemented')`
   - No `// TODO: implement this` comments
   - All business rules from PRD implemented

3. **Pagination Enforcement (Pattern 78):**
   - All list endpoints extend BaseService abstract class
   - BaseService provides: `paginate(query, page, limit)`
   - Default page size: 20 items
   - Maximum page size: 100 items

4. **Transaction Wrappers (Pattern 31):**
   - Multi-step operations wrapped in db.transaction()
   - Example: register (creates User + Organization atomically)
   - Example: deleteProject (cascades to Sources + ProcessingJobs + Datasets)

**Base Service Template:**
```typescript
// server/services/base.service.ts
export abstract class BaseService {
  protected paginate<T>(
    query: any,
    page: number = 1,
    limit: number = 20
  ): Promise<{ data: T[]; total: number; page: number }> {
    // Pagination logic
  }
}
```

**Verification Scripts (Phase 2):**
- `verify-service-stubs.sh` (Pattern 77) - BLOCKING
- `verify-route-service-contract.sh` (Pattern 76) - Will run in Phase 3
- `verify-pagination.sh` (Pattern 78)
- `verify-transactions.sh` (Pattern 31)
- `verify-file-upload-security.sh` (Pattern 30)

**Exit Criteria:**
- [ ] 7 service files created
- [ ] 51 service functions implemented (zero stubs)
- [ ] All list functions use BaseService pagination
- [ ] Transaction wrappers on multi-step operations
- [ ] File upload security with MIME type validation
- [ ] All Phase 2 verification scripts pass

---

### PHASE 3: Routes Implementation (Thread A continues)

**Purpose:** Create API endpoint definitions that delegate to services

**Route Files to Create (6 total):**

1. **`server/routes/auth.routes.ts` (8 endpoints)**
2. **`server/routes/organizations.routes.ts` (4 endpoints)**
3. **`server/routes/projects.routes.ts` (6 endpoints)**
4. **`server/routes/sources.routes.ts` (6 endpoints)**
5. **`server/routes/processing.routes.ts` (6 endpoints)**
6. **`server/routes/datasets.routes.ts` (6 endpoints)**
7. **`server/routes/integrations.routes.ts` (6 endpoints)** - WAIT, this should be 7 total!

**Route Implementation Pattern:**
```typescript
import express from 'express';
import { authService } from '../services/auth.service';
import { validateBody } from '../middleware/validation';
import { loginSchema } from '../validators/auth.validators';

const router = express.Router();

// POST /api/auth/login
router.post('/login', 
  validateBody(loginSchema),
  async (req, res, next) => {
    try {
      const { email, password } = req.body;
      const result = await authService.login(email, password);
      return res.json(successResponse(result));
    } catch (error) {
      next(error);
    }
  }
);

export default router;
```

**Route-Service Contract Rules (Pattern 76):**

1. **Exact Import Paths:**
   - Import service from correct file: `import { authService } from '../services/auth.service'`
   - NO typos: `auth-service`, `authServices`, `authentication.service`

2. **Exact Function Names:**
   - Call service function as specified in contract
   - Example: `authService.login()` not `authService.loginUser()`
   - Contract says "getUserProfile" → use "getUserProfile" (not "getProfile")

3. **Exact Parameter Order:**
   - Pass parameters in contract-specified order
   - Example: `projectService.updateProject(orgId, projectId, data)`
   - NOT: `projectService.updateProject(projectId, orgId, data)`

4. **Endpoint Path Alignment (Pattern 82):**
   - Copy paths EXACTLY from service-contracts.json
   - Common mistake: `/api/projects/:projectId` → `/api/projects/:id` (WRONG)
   - Include ALL path parameters: `/api/orgs/:orgId/projects/:projectId` (not simplified)

**Prohibited Patterns:**
- âŒ Direct `res.json()` without response helpers (use `successResponse()`)
- âŒ Direct `parseInt(req.params.id)` (use validation middleware)
- âŒ SQL string concatenation (use Drizzle parameterized queries)
- âŒ Business logic in route handlers (belongs in services)
- âŒ `Math.random()` for ID generation (use crypto.randomUUID() or nanoid)

**Verification Scripts (Phase 3):**
- `verify-route-service-contract.sh` (Pattern 76) - BLOCKING
- `verify-endpoint-paths.sh` (Pattern 82) - BLOCKING
- `verify-endpoint-count.sh` (Pattern 24)
- `verify-code-quality.sh` (detects prohibited patterns)
- `verify-console-logs.sh` (Pattern 26)

**Exit Criteria:**
- [ ] 7 route files created (including integrations.routes.ts)
- [ ] 51 endpoints implemented (matches PRD count)
- [ ] All routes import correct service files
- [ ] All routes call correct service functions
- [ ] All endpoint paths match contracts exactly
- [ ] Zero prohibited patterns detected
- [ ] All Phase 3 verification scripts pass

---

### PHASE 4: Database Schema (Thread B - Parallel)

**Purpose:** Create database schema, migrations, and seed data

**Schema Files to Create (9 tables):**

1. **`server/db/schema/users.ts`**
   - Fields: id, email, password_hash, name, created_at, updated_at
   - Indexes: email (unique)

2. **`server/db/schema/organizations.ts`**
   - Fields: id, name, created_at, updated_at, owner_id (FK to users)
   - Indexes: owner_id

3. **`server/db/schema/projects.ts`**
   - Fields: id, organization_id (FK), name, description, config (JSONB), created_at, updated_at
   - Indexes: organization_id

4. **`server/db/schema/datasources.ts`**
   - Fields: id, project_id (FK), type, file_path, metadata (JSONB), created_at
   - Indexes: project_id, type

5. **`server/db/schema/processing_jobs.ts`**
   - Fields: id, project_id (FK), source_id (FK), status, config (JSONB), started_at, completed_at
   - Indexes: project_id, source_id, status

6. **`server/db/schema/datasets.ts`**
   - Fields: id, job_id (FK), format, file_path, row_count, metadata (JSONB), created_at
   - Indexes: job_id

7. **`server/db/schema/processing_logs.ts`**
   - Fields: id, job_id (FK), level, message, metadata (JSONB), created_at
   - Indexes: job_id, level, created_at

8. **`server/db/schema/integrations.ts`**
   - Fields: id, organization_id (FK), type, credentials (JSONB encrypted), config (JSONB), status, created_at
   - Indexes: organization_id, type

9. **`server/db/schema/rate_limits.ts`**
   - Fields: id, identifier, endpoint, count, window_start, created_at
   - Indexes: identifier, endpoint, window_start

**Schema Implementation Rules:**

1. **Drizzle Schema Syntax:**
```typescript
import { pgTable, varchar, timestamp, integer, text, jsonb } from 'drizzle-orm/pg-core';

export const users = pgTable('users', {
  id: varchar('id', { length: 255 }).primaryKey(),
  email: varchar('email', { length: 255 }).notNull().unique(),
  passwordHash: varchar('password_hash', { length: 255 }).notNull(),
  name: varchar('name', { length: 255 }).notNull(),
  createdAt: timestamp('created_at').defaultNow().notNull(),
  updatedAt: timestamp('updated_at').defaultNow().notNull()
});
```

2. **Foreign Key Constraints:**
   - Define references: `.references(() => organizations.id)`
   - onDelete: 'CASCADE' for dependent data
   - onDelete: 'SET NULL' for optional references

3. **Index Strategy:**
   - Primary keys: id (varchar UUID)
   - Foreign keys: organization_id, project_id, user_id
   - Query filters: status, type, created_at
   - Unique constraints: email

4. **JSON Fields:**
   - Use `jsonb()` type for flexible data (config, metadata)
   - Always provide default value: `.default({})`

**Migration Files:**
```
server/db/migrations/
├── 0001_create_users.sql
├── 0002_create_organizations.sql
├── 0003_create_projects.sql
├── 0004_create_datasources.sql
├── 0005_create_processing_jobs.sql
├── 0006_create_datasets.sql
├── 0007_create_processing_logs.sql
├── 0008_create_integrations.sql
└── 0009_create_rate_limits.sql
```

**Seed Data:**
```typescript
// scripts/seed-admin.ts
// Creates admin user + organization for testing
// Email: admin@foundry.dev
// Password: Admin123!
// Organization: Foundry Admin
```

**Verification Scripts (Phase 4):**
- `verify-schema-count.sh` (must equal 9 tables)
- `verify-schema-exports.sh` (index.ts exports all schemas)
- `verify-seed-script.sh`

**Exit Criteria:**
- [ ] 9 schema files created
- [ ] All foreign keys defined with onDelete behavior
- [ ] All indexes created for query patterns
- [ ] Migration files generated
- [ ] Seed script creates admin user
- [ ] All Phase 4 verification scripts pass

---

### PHASE 5: Frontend Components (Thread C - Parallel)

**Purpose:** Create reusable UI components

**Component Categories:**

1. **shadcn/ui Base Components (installed via CLI):**
   - Button, Card, Input, Form, Alert, Badge, Dialog, Dropdown, Table, Tabs

2. **Layout Components to Create:**
   - `components/layout/Navbar.tsx` - Top navigation with auth state
   - `components/layout/Sidebar.tsx` - Side navigation for authenticated pages
   - `components/layout/AuthLayout.tsx` - Layout wrapper for auth pages
   - `components/layout/DashboardLayout.tsx` - Layout wrapper for app pages

3. **Shared Components to Create:**
   - `components/FileUpload.tsx` - Drag-and-drop file upload with validation
   - `components/DataTable.tsx` - Reusable data table with pagination
   - `components/StatusBadge.tsx` - Status indicator (pending/running/complete/failed)
   - `components/LoadingSpinner.tsx` - Loading state component
   - `components/EmptyState.tsx` - Empty list placeholder

4. **Auth Context:**
   - `hooks/useAuth.tsx` - Auth context provider with login/logout/user state

**Component Implementation Rules:**

1. **TypeScript Props:**
```typescript
interface FileUploadProps {
  onUpload: (file: File) => Promise<void>;
  accept: string;
  maxSize: number;
  disabled?: boolean;
}
```

2. **Tailwind Styling:**
   - Use utility classes only (no custom CSS)
   - Responsive: mobile-first breakpoints (sm:, md:, lg:)
   - Dark mode support: `dark:` variants

3. **Accessibility:**
   - ARIA labels on interactive elements
   - Keyboard navigation support
   - Focus indicators visible

**Verification Scripts (Phase 5):**
- `verify-navigation-components.sh` (Pattern 19)
- `verify-auth-context.sh` (Pattern 32)

**Exit Criteria:**
- [ ] All layout components created
- [ ] All shared components created
- [ ] Auth context with User interface (includes role, organizationId)
- [ ] Components follow TypeScript patterns
- [ ] All Phase 5 verification scripts pass

---

### PHASE 7: Pages Implementation (Thread C continues)

**Purpose:** Create 18 page components using parsed contracts from Phase 0.5

**Pages to Create (from routes-pages-manifest.json):**

**Authentication Pages (4):**
1. `client/src/pages/auth/LoginPage.tsx` - Route: /login
2. `client/src/pages/auth/RegisterPage.tsx` - Route: /register
3. `client/src/pages/auth/ForgotPasswordPage.tsx` - Route: /forgot-password
4. `client/src/pages/auth/ResetPasswordPage.tsx` - Route: /reset-password

**Dashboard Pages (2):**
5. `client/src/pages/dashboard/DashboardPage.tsx` - Route: /dashboard
6. `client/src/pages/dashboard/ProfilePage.tsx` - Route: /profile

**Project Pages (4):**
7. `client/src/pages/projects/ProjectListPage.tsx` - Route: /projects
8. `client/src/pages/projects/ProjectCreatePage.tsx` - Route: /projects/new
9. `client/src/pages/projects/ProjectDetailPage.tsx` - Route: /projects/:id
10. `client/src/pages/projects/ProjectConfigPage.tsx` - Route: /projects/:id/config

**Source Pages (3):**
11. `client/src/pages/sources/SourceListPage.tsx` - Route: /sources
12. `client/src/pages/sources/SourceUploadPage.tsx` - Route: /sources/upload
13. `client/src/pages/sources/SourceDetailPage.tsx` - Route: /sources/:id

**Processing Pages (2):**
14. `client/src/pages/processing/ProcessingConfigPage.tsx` - Route: /processing/config
15. `client/src/pages/processing/ProcessingJobsPage.tsx` - Route: /processing/jobs

**Dataset Pages (3):**
16. `client/src/pages/datasets/DatasetListPage.tsx` - Route: /datasets
17. `client/src/pages/datasets/DatasetDetailPage.tsx` - Route: /datasets/:id
18. `client/src/pages/datasets/DatasetDownloadPage.tsx` - Route: /datasets/:id/download

**Page Implementation Rules (using pageMap from Phase 0.5):**

1. **API Dependencies Alignment:**
   - Use apiDependencies from pageMap
   - Example: LoginPage depends on POST /api/auth/login
   - Create TanStack Query hook: `useLogin()` that calls this endpoint
   - Never create pages before APIs exist (enforced by Phase 0.5 validation)

2. **Data Requirements:**
   - Import types from dataDependencies
   - Example: RegisterPage uses User and Organization types

3. **Component Dependencies:**
   - Use componentDependencies from pageMap
   - Example: LoginPage uses Card, Form, Input, Button, Alert

4. **Page Template:**
```typescript
import { useQuery, useMutation } from '@tanstack/react-query';
import { Card, Form, Input, Button } from '@/components/ui';
import { useNavigate } from 'react-router-dom';

export default function LoginPage() {
  const navigate = useNavigate();
  
  const loginMutation = useMutation({
    mutationFn: async (data: LoginData) => {
      const res = await fetch('/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      return res.json();
    },
    onSuccess: () => navigate('/dashboard')
  });

  return (
    <Card>
      {/* Form implementation */}
    </Card>
  );
}
```

5. **Authentication Guards:**
   - Use authenticated flag from pageMap
   - Wrap protected routes with <ProtectedRoute>

**Artifact Checklist (Pattern 42):**
- [ ] LoginPage.tsx
- [ ] RegisterPage.tsx
- [ ] ForgotPasswordPage.tsx
- [ ] ResetPasswordPage.tsx
- [ ] DashboardPage.tsx
- [ ] ProfilePage.tsx
- [ ] ProjectListPage.tsx
- [ ] ProjectCreatePage.tsx
- [ ] ProjectDetailPage.tsx
- [ ] ProjectConfigPage.tsx
- [ ] SourceListPage.tsx
- [ ] SourceUploadPage.tsx
- [ ] SourceDetailPage.tsx
- [ ] ProcessingConfigPage.tsx
- [ ] ProcessingJobsPage.tsx
- [ ] DatasetListPage.tsx
- [ ] DatasetDetailPage.tsx
- [ ] DatasetDownloadPage.tsx

**Verification Scripts (Phase 7):**
- `verify-page-count.sh` (must equal 18)
- `verify-page-api-dependencies.sh` (cross-validates with serviceMap)
- `verify-protected-routes.sh`

**Exit Criteria:**
- [ ] 18 page files created (matches PRD and manifest)
- [ ] All pages use correct API endpoints from serviceMap
- [ ] Protected routes have authentication guards
- [ ] All Phase 7 verification scripts pass

---

### PHASE 6: Auth & Middleware (After Thread Sync)

**Purpose:** Implement authentication and security middleware

**Middleware Files to Create:**

1. **`server/middleware/auth.middleware.ts`:**
```typescript
export const authenticateToken = (req, res, next) => {
  // JWT verification from HTTP-only cookie
  // Attach user to req.user
};

export const requireAuth = (req, res, next) => {
  // Ensures req.user exists
};

export const requireOrgAccess = (req, res, next) => {
  // Ensures user belongs to organization in route params
};
```

2. **`server/middleware/rate-limit.middleware.ts`:**
```typescript
import rateLimit from 'express-rate-limit';

export const loginRateLimit = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 5, // 5 attempts
  message: 'Too many login attempts'
});
```

3. **`server/middleware/upload.middleware.ts`:**
```typescript
import multer from 'multer';

export const uploadMiddleware = multer({
  storage: multer.memoryStorage(),
  limits: { fileSize: 100 * 1024 * 1024 }, // 100MB
  fileFilter: (req, file, cb) => {
    // MIME type validation (Pattern 30)
    const allowed = ['text/csv', 'application/json', 'application/vnd.ms-excel'];
    if (allowed.includes(file.mimetype)) {
      cb(null, true);
    } else {
      cb(new Error('Invalid file type'));
    }
  }
});
```

**Security Patterns:**

1. **JWT Token Handling (Pattern 9):**
   - Store in HTTP-only cookies (NOT localStorage)
   - 7-day expiration
   - Include userId and organizationId claims

2. **Password Security:**
   - bcrypt with work factor 10
   - Minimum 8 characters, letters + numbers

3. **CORS Configuration:**
   - Allow credentials: true
   - Origin: http://127.0.0.1:5000 (dev), process.env.FRONTEND_URL (prod)

**Verification Scripts (Phase 6):**
- `verify-jwt-cookies.sh` (Pattern 9)
- `verify-bcrypt-usage.sh`
- `verify-cors-config.sh`

**Exit Criteria:**
- [ ] Auth middleware implemented
- [ ] Rate limiting configured
- [ ] File upload with MIME validation
- [ ] JWT tokens in HTTP-only cookies
- [ ] All Phase 6 verification scripts pass

---

### PHASE 8: Integration & Server Setup

**Purpose:** Wire everything together and create main entry points

**Files to Create:**

1. **`server/index.ts` (Main Server):**
```typescript
import express from 'express';
import cors from 'cors';
import helmet from 'helmet';
import { errorHandler } from './middleware/errorHandler';

// Import routes
import authRoutes from './routes/auth.routes';
import projectRoutes from './routes/projects.routes';
// ... import all route files

const app = express();

// Middleware
app.use(helmet());
app.use(cors({ origin: 'http://127.0.0.1:5000', credentials: true }));
app.use(express.json());

// Health check
app.get('/api/health', (req, res) => {
  res.json({ status: 'ok' });
});

// API Routes
app.use('/api/auth', authRoutes);
app.use('/api/projects', projectRoutes);
// ... mount all routes

// Error handler
app.use(errorHandler);

// Network binding (Pattern 29)
const PORT = process.env.PORT || 3001;
const HOST = process.env.NODE_ENV === 'production' ? '0.0.0.0' : '127.0.0.1';

app.listen(PORT, HOST, () => {
  console.log(`Server running on ${HOST}:${PORT}`);
});
```

2. **`client/src/App.tsx` (Main React App):**
```typescript
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import ErrorBoundary from './components/ErrorBoundary';

// Import all pages
import LoginPage from './pages/auth/LoginPage';
// ... import all 18 pages

const queryClient = new QueryClient();

function App() {
  return (
    <ErrorBoundary>
      <QueryClientProvider client={queryClient}>
        <BrowserRouter>
          <Routes>
            {/* Auth routes */}
            <Route path="/login" element={<LoginPage />} />
            {/* ... all 18 routes */}
          </Routes>
        </BrowserRouter>
      </QueryClientProvider>
    </ErrorBoundary>
  );
}
```

3. **`client/src/main.tsx` (Vite Entry):**
```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

**Verification Scripts (Phase 8):**
- `verify-server-setup.sh`
- `verify-route-mounting.sh`
- `verify-app-routes.sh`
- `verify-health-endpoint.sh`

**Exit Criteria:**
- [ ] Server starts without errors
- [ ] All routes mounted correctly
- [ ] Health endpoint responds
- [ ] React app renders
- [ ] All Phase 8 verification scripts pass

---

## AGENT 7: VERIFICATION GATES (52 Total)

After Phase 8 completes, Agent 7 runs 52 verification scripts across all phases:

**Pre-Flight Gates (Phase 0):**
- Gate #53: Spec stack validation
- Gates #49-52: Deployment configuration (Patterns 80-82)

**Foundation Gates (Phase 1):**
- Gates #1-10: Project structure, utilities, ErrorBoundary, env config

**Service Gates (Phase 2):**
- Gates #11-15: Service stubs, contracts, pagination, transactions

**Route Gates (Phase 3):**
- Gates #16-20: Route-service alignment, endpoint paths, count verification

**Database Gates (Phase 4):**
- Gates #21-25: Schema count, exports, migrations, seed data

**Component Gates (Phase 5):**
- Gates #26-30: Navigation, auth context, component completeness

**Page Gates (Phase 7):**
- Gates #31-35: Page count, API dependencies, protected routes

**Integration Gates (Phase 8):**
- Gates #36-40: Server setup, route mounting, health check

**Security Gates (All Phases):**
- Gates #41-45: JWT cookies, CORS, rate limiting, file upload security

**Code Quality Gates (All Phases):**
- Gates #46-52: No TODOs, no stubs, no prohibited patterns, console logs

**Execution:**
```bash
cd /home/claude
./verify-all-gates.sh
```

**Pass Criteria:** ALL 52 gates must pass before deployment

---

## FILE MANIFEST

### Backend Files (Total: 45 files)

**Configuration (5 files):**
- .replit
- package.json
- tsconfig.json (server)
- vite.config.ts
- .env.example

**Server Core (8 files):**
- server/index.ts
- server/config/database.ts
- server/config/cors.ts
- server/utils/response.ts
- server/utils/validation.ts
- server/utils/logger.ts
- server/utils/crypto.ts
- server/utils/file-parser.ts

**Middleware (6 files):**
- server/middleware/errorHandler.ts
- server/middleware/auth.middleware.ts
- server/middleware/validation.middleware.ts
- server/middleware/rate-limit.middleware.ts
- server/middleware/upload.middleware.ts
- server/middleware/logging.middleware.ts

**Services (7 files):**
- server/services/base.service.ts
- server/services/auth.service.ts
- server/services/organizations.service.ts
- server/services/projects.service.ts
- server/services/sources.service.ts
- server/services/processing.service.ts
- server/services/datasets.service.ts
- server/services/integrations.service.ts

**Routes (7 files):**
- server/routes/health.routes.ts
- server/routes/auth.routes.ts
- server/routes/organizations.routes.ts
- server/routes/projects.routes.ts
- server/routes/sources.routes.ts
- server/routes/processing.routes.ts
- server/routes/datasets.routes.ts
- server/routes/integrations.routes.ts

**Database (12 files):**
- server/db/index.ts
- server/db/schema/index.ts
- server/db/schema/users.ts
- server/db/schema/organizations.ts
- server/db/schema/projects.ts
- server/db/schema/datasources.ts
- server/db/schema/processing_jobs.ts
- server/db/schema/datasets.ts
- server/db/schema/processing_logs.ts
- server/db/schema/integrations.ts
- server/db/schema/rate_limits.ts
- server/db/migrations/ (9 migration files)

### Frontend Files (Total: 40 files)

**Configuration (3 files):**
- client/index.html
- client/tsconfig.json
- client/src/index.css

**Core (3 files):**
- client/src/main.tsx
- client/src/App.tsx
- client/src/vite-env.d.ts

**Layout Components (5 files):**
- client/src/components/layout/Navbar.tsx
- client/src/components/layout/Sidebar.tsx
- client/src/components/layout/AuthLayout.tsx
- client/src/components/layout/DashboardLayout.tsx
- client/src/components/ErrorBoundary.tsx

**Shared Components (10 files):**
- client/src/components/FileUpload.tsx
- client/src/components/DataTable.tsx
- client/src/components/StatusBadge.tsx
- client/src/components/LoadingSpinner.tsx
- client/src/components/EmptyState.tsx
- client/src/components/ui/* (5 shadcn components)

**Hooks (4 files):**
- client/src/hooks/useAuth.tsx
- client/src/hooks/useProjects.tsx
- client/src/hooks/useSources.tsx
- client/src/hooks/useDatasets.tsx

**Pages (18 files):**
- client/src/pages/auth/LoginPage.tsx
- client/src/pages/auth/RegisterPage.tsx
- client/src/pages/auth/ForgotPasswordPage.tsx
- client/src/pages/auth/ResetPasswordPage.tsx
- client/src/pages/dashboard/DashboardPage.tsx
- client/src/pages/dashboard/ProfilePage.tsx
- client/src/pages/projects/ProjectListPage.tsx
- client/src/pages/projects/ProjectCreatePage.tsx
- client/src/pages/projects/ProjectDetailPage.tsx
- client/src/pages/projects/ProjectConfigPage.tsx
- client/src/pages/sources/SourceListPage.tsx
- client/src/pages/sources/SourceUploadPage.tsx
- client/src/pages/sources/SourceDetailPage.tsx
- client/src/pages/processing/ProcessingConfigPage.tsx
- client/src/pages/processing/ProcessingJobsPage.tsx
- client/src/pages/datasets/DatasetListPage.tsx
- client/src/pages/datasets/DatasetDetailPage.tsx
- client/src/pages/datasets/DatasetDownloadPage.tsx

**Total Files:** 85+ core files (excluding node_modules, shadcn/ui library files)

---

## CRITICAL IMPLEMENTATION RULES

### Rule 1: Contract Adherence (Pattern 83)

**ALWAYS use parsed contracts from Phase 0.5:**
- Service function names: serviceMap[endpoint].functionName (exact camelCase)
- Route paths: Copy EXACTLY from service-contracts.json
- Page API dependencies: Use pageMap[route].apiDependencies

**NEVER interpret or simplify:**
- "getUserProfile" stays "getUserProfile" (not "getProfile")
- "/api/projects/:projectId" stays as-is (not "/api/projects/:id")

### Rule 2: Service-First Architecture (Pattern 76)

**Implementation Order:**
1. Parse contracts (Phase 0.5)
2. Implement services (Phase 2)
3. Verify services are complete (no stubs)
4. Implement routes that call services (Phase 3)
5. Implement pages that call routes (Phase 7)

**NEVER:**
- Create routes before services exist
- Create pages before APIs exist
- Create stub implementations

### Rule 3: Prohibited Patterns

**ABSOLUTELY FORBIDDEN:**
- âŒ `Math.random()` for ID generation → Use `crypto.randomUUID()`
- âŒ `eval()` or `Function()` → Never use
- âŒ Direct `res.json()` → Use `successResponse()` helper
- âŒ SQL string concatenation → Use Drizzle parameterized queries
- âŒ Hardcoded secrets → Use environment variables
- âŒ `localhost` strings → Use `127.0.0.1` or `0.0.0.0`
- âŒ Direct `parseInt(req.params)` → Use validation middleware

### Rule 4: Code Completeness (Pattern 27)

**Every file must be 100% complete:**
- No `// TODO:` comments
- No `// FIXME:` comments
- No `throw new Error('Not implemented')`
- No placeholder functions
- All business logic from PRD implemented

### Rule 5: Verification Gate Enforcement

**Every phase has verification scripts:**
- Scripts run AFTER phase completes
- ALL scripts must pass (zero tolerance)
- Build blocks if any script fails
- Fix issues before proceeding

---

## ESTIMATED TIMELINE

**With Concurrent Execution (CONCURRENT_EXECUTION=true):**

| Phase | Duration | Parallelization | Notes |
|-------|----------|-----------------|-------|
| Phase 0.0 | 30 sec | Sequential | Spec validation |
| Phase 0.5 | 1 min | Sequential | Contract parsing |
| Phase 0 | 2 min | Sequential | Pre-flight files |
| Phase 1 | 3 min | Sequential | Foundation setup |
| **Concurrent Block** | **5 min** | **3 threads** | **Parallel execution** |
| - Thread A (Services + Routes) | 5 min | Parallel | 7 services + 7 routes |
| - Thread B (Database) | 4 min | Parallel | 9 tables + migrations |
| - Thread C (Components + Pages) | 5 min | Parallel | 10 components + 18 pages |
| Phase 6 | 2 min | Sequential | Auth & middleware |
| Phase 8 | 2 min | Sequential | Integration |
| Agent 7 | 2 min | Sequential | 52 verification scripts |
| **TOTAL** | **~12-15 min** | | |

**Without Concurrency (Sequential):**
- Estimated: 18-22 minutes

**Speedup:** 25-30% faster with concurrent execution

---

## DEPLOYMENT READINESS

### Pre-Deployment Checklist

**Configuration:**
- [ ] DATABASE_URL configured (Replit Neon connection string)
- [ ] JWT_SECRET generated (64-character random string)
- [ ] PORT set to 5000 for production
- [ ] NODE_ENV set to 'production'
- [ ] CORS origins configured for production domain

**Database:**
- [ ] Migrations run successfully
- [ ] Seed admin user created
- [ ] Connection pooling configured (max 20 connections)
- [ ] Database indexes created

**Security:**
- [ ] Passwords hashed with bcrypt work factor 10
- [ ] JWT tokens in HTTP-only cookies
- [ ] Rate limiting enabled (5 login attempts / 15 min)
- [ ] File upload MIME type validation active
- [ ] Helmet security headers configured

**Verification:**
- [ ] All 52 Agent 7 gates passed
- [ ] Health endpoint responds: GET /api/health
- [ ] Login flow works end-to-end
- [ ] File upload works with 100MB limit
- [ ] Processing job completes successfully

### Deployment Command

```bash
# Replit auto-deploys from main branch
# Or manual deploy:
npm run build
npm run start
```

### Post-Deployment Verification

```bash
# Test health endpoint
curl https://foundry.replit.app/api/health
# Expected: {"status":"ok"}

# Test registration
curl -X POST https://foundry.replit.app/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"Test123!","name":"Test User"}'
# Expected: 201 with user, organization, and token
```

---

## QUALITY ASSURANCE

### Prevention-First Strategy (Agent 6 v50)

**Goal:** Generate perfect code on first attempt (zero issues)

**Prevention Mechanisms:**

1. **Contract Parsing (Phase 0.5 - Pattern 83):**
   - Eliminates interpretation errors
   - Ensures exact function names, paths, parameters
   - Cross-validates page→API dependencies

2. **Progressive Verification (52 Gates):**
   - Verification after each file/resource
   - Immediate feedback (not end-of-phase)
   - Blocking failures (fix before proceeding)

3. **Exact Templates (Agent 6 Section 8):**
   - Copy-paste templates for common patterns
   - Zero interpretation needed
   - Proven implementations

4. **Service-First Architecture:**
   - Services verified before routes
   - Routes verified before pages
   - Dependencies created in correct order

**Expected Outcome:**
- 0 issues at Agent 7 verification
- 0 issues at Agent 8 audit (if run)
- Deploy on first attempt

### Agent 8 Optional Audit

**Configuration:** AUTO_FIX_MODE = false (Agent 8 skipped by default)

**If Enabled:**
- Runs after Agent 7 passes
- 82 audit patterns
- Auto-fix high-confidence issues
- Max 3 iterations
- Expected: 0 issues on first iteration (99.5% prevention)

---

## SUCCESS CRITERIA

### Implementation Complete When:

1. **File Count Validation:**
   - [ ] 85+ core files created
   - [ ] 7 service files (51 total functions)
   - [ ] 7 route files (51 total endpoints)
   - [ ] 9 database schema files
   - [ ] 18 page components

2. **Verification Gates:**
   - [ ] All 52 Agent 7 gates passed
   - [ ] Zero verification failures
   - [ ] Zero TODO/FIXME comments
   - [ ] Zero stub implementations

3. **Functional Requirements:**
   - [ ] User can register and create organization
   - [ ] User can login and receive JWT
   - [ ] User can upload CSV file (up to 100MB)
   - [ ] Processing job runs and creates dataset
   - [ ] User can download processed dataset
   - [ ] All 18 pages render without errors

4. **Non-Functional Requirements:**
   - [ ] Health endpoint responds in <100ms
   - [ ] Login completes in <2 seconds
   - [ ] Page loads in <2 seconds
   - [ ] File upload handles 100MB files
   - [ ] Processing completes in <10 minutes

5. **Security Requirements:**
   - [ ] Passwords hashed with bcrypt
   - [ ] JWT in HTTP-only cookies
   - [ ] Rate limiting active
   - [ ] File upload MIME validation
   - [ ] Multi-tenant data isolation

### Deployment Ready When:

- [ ] All success criteria above met
- [ ] Replit .replit file configured
- [ ] Environment variables set
- [ ] Database migrations run
- [ ] Seed data loaded
- [ ] Manual smoke test passed

---

## APPENDIX A: KEY PATTERNS REFERENCE

### Pattern 1: Response Helpers
**File:** `server/utils/response.ts`
**Purpose:** Standardized API responses
**Usage:** `return res.json(successResponse(data))`

### Pattern 76: Route-Service Contract
**Purpose:** Ensure routes call correct services with correct parameters
**Enforcement:** `verify-route-service-contract.sh`

### Pattern 77: Stub Detection
**Purpose:** Block incomplete implementations
**Enforcement:** `verify-service-stubs.sh` (BLOCKING)

### Pattern 78: Pagination Enforcement
**Purpose:** All list endpoints paginate results
**Implementation:** Extend BaseService abstract class

### Pattern 80: .replit File Template
**Purpose:** Correct Replit deployment configuration
**Critical:** Port 5000, deploymentTarget cloudrun

### Pattern 81: Concurrent Dev Script
**Purpose:** Run frontend + backend concurrently
**Script:** `"dev": "concurrently \"npm run dev:server\" \"npm run dev:client\""`

### Pattern 82: Endpoint Path Alignment
**Purpose:** Copy paths exactly from contracts
**Rule:** No simplification, include all parameters

### Pattern 83: JSON Contract Parsing (NEW v50)
**Purpose:** Parse contracts before implementation
**Output:** serviceMap, pageMap, decisions JSON files
**Impact:** Prevents 50-60% of cross-document errors

---

## APPENDIX B: VERIFICATION SCRIPT SUMMARY

| Script | Phase | Pattern | Type | Purpose |
|--------|-------|---------|------|---------|
| verify-spec-stack.sh | 0.0 | Gate #53 | BLOCKING | Spec integrity |
| verify-replit-deployment.sh | 0 | Pattern 80 | BLOCKING | .replit config |
| verify-port-consistency.sh | 0 | - | BLOCKING | Port 5000/3001 |
| verify-vite-config.sh | 0 | Pattern 82 | BLOCKING | No localhost |
| verify-response-helpers.sh | 1 | Pattern 1 | BLOCKING | Helper functions |
| verify-error-boundary.sh | 1 | Pattern 23 | BLOCKING | React boundary |
| verify-env-example.sh | 1 | Pattern 28 | BLOCKING | Env vars |
| verify-service-stubs.sh | 2 | Pattern 77 | BLOCKING | No stubs |
| verify-pagination.sh | 2 | Pattern 78 | BLOCKING | BaseService |
| verify-transactions.sh | 2 | Pattern 31 | BLOCKING | Transaction wrappers |
| verify-route-service-contract.sh | 3 | Pattern 76 | BLOCKING | Import/call alignment |
| verify-endpoint-paths.sh | 3 | Pattern 82 | BLOCKING | Exact paths |
| verify-endpoint-count.sh | 3 | Pattern 24 | BLOCKING | Count = 51 |
| verify-schema-count.sh | 4 | - | BLOCKING | Count = 9 |
| verify-page-count.sh | 7 | - | BLOCKING | Count = 18 |
| verify-page-api-dependencies.sh | 7 | Pattern 83 | BLOCKING | Cross-validate |
| verify-health-endpoint.sh | 8 | - | BLOCKING | GET /api/health |

**Total:** 52 verification scripts (17 shown above for key patterns)

---

## APPENDIX C: ARCHITECTURAL DECISIONS REFERENCE

**From architectural-decisions.json:**

| Decision ID | Category | Selected Option | Implementation Impact |
|-------------|----------|-----------------|----------------------|
| ADR-001 | Runtime | Node.js 20.x | Use node:20 in Replit |
| ADR-002 | Framework | Express.js | Install express@4.x |
| ADR-003 | Database | PostgreSQL (Neon) | Use pg driver |
| ADR-004 | ORM | Drizzle ORM | Install drizzle-orm |
| ADR-005 | Frontend | React 18 | Install react@18 |
| ADR-006 | Build Tool | Vite 5 | Install vite@5 |
| ADR-007 | State Mgmt | TanStack Query | Install @tanstack/react-query |
| ADR-008 | UI Library | shadcn/ui | Use npx shadcn-ui@latest add |
| ADR-009 | Styling | Tailwind CSS | Install tailwindcss |
| ADR-011 | UUID | crypto.randomUUID() | NEVER use Math.random() |
| ADR-015 | JWT Storage | HTTP-only cookies | Set httpOnly: true |
| ADR-018 | File Upload | multer | Max 100MB, MIME validation |
| ADR-025 | Session Timeout | 7 days | JWT exp: 7d |

---

## DOCUMENT END

**Agent 6 v50 Implementation Orchestration Plan Complete**

This comprehensive plan provides:
- ✅ Complete project overview and architecture
- ✅ Phase-by-phase implementation strategy
- ✅ Concurrent execution model (3 threads)
- ✅ File-by-file creation guide
- ✅ Pattern and template references
- ✅ Verification gate checkpoints (52 total)
- ✅ Quality assurance strategy
- ✅ Deployment readiness criteria

**Ready for execution with claude-code-master-build-prompt.md**

**Quality Target:** 0 issues at deployment (prevention-first)  
**Estimated Build Time:** 12-15 minutes (with concurrency)  
**Expected Outcome:** Deploy-ready full-stack application

---

**Generated:** 2026-01-28  
**Agent:** Agent 6 (Implementation Orchestrator v50)  
**Framework:** Agent Specification Framework v2.1  
**Status:** ✅ READY FOR IMPLEMENTATION
